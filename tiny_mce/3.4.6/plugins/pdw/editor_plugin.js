(function(){var a=tinymce.DOM;tinymce.PluginManager.requireLangPack("pdw");tinymce.create("tinymce.plugins.pdw",{init:function(b,c){var e=this,f=new Array(),g=new Array(),d;g=(b.settings.pdw_toggle_toolbars).split(",");for(d=0;d<g.length;d++){f[d]=b.getParam("","toolbar"+(g[d]).replace(" ",""))}b.addCommand("mcePDWToggleToolbars",function(){var h=b.controlManager,n,l,k=tinymce.util.Cookie,i,m=k.getHash("TinyMCE_toggle")||new Object();for(l=0;l<f.length;l++){obj=b.controlManager.get(f[l]);if(typeof obj=="undefined"){continue}n=obj.id;if(a.isHidden(n)){i=0;a.show(n);e._resizeIframe(b,f[l],-26)}else{i=1;a.hide(n);e._resizeIframe(b,f[l],26)}}h.setActive("pdw_toggle",!i);b.settings.pdw_toggle_on=i;m[b.id]=i;k.setHash("TinyMCE_toggle",m)});b.addButton("pdw_toggle",{title:b.getLang("pdw.desc",0),cmd:"mcePDWToggleToolbars",image:c+"/img/toolbars.gif"});b.onPostRender.add(function(){var i=tinymce.util.Cookie.getHash("TinyMCE_toggle")||new Object();var k=false;if(i[b.id]==null){k=b.settings.pdw_toggle_on==1?true:false}else{if(i[b.id]==1){k=true}}if(k){var h=b.controlManager,j,l;for(d=0;d<g.length;d++){tbId=b.getParam("","toolbar"+(g[d]).replace(" ",""));l=b.controlManager.get(tbId).id;h.setActive("pdw_toggle",0);a.hide(l);e._resizeIframe(b,tbId,26)}}})},_resizeIframe:function(c,e,b){var d=c.getContentAreaContainer().firstChild;a.setStyle(d,"height",a.getSize(d).h+b);c.theme.deltaHeight+=b},getInfo:function(){return{longname:"PDW Toggle Toolbars",author:"Guido Neele",authorurl:"http://www.neele.name/",infourl:"http://www.neele.name/pdw_toggle_toolbars",version:"1.2"}}});tinymce.PluginManager.add("pdw",tinymce.plugins.pdw)})();